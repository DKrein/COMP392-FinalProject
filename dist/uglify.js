function preload(){assets=new createjs.LoadQueue,assets.installPlugin(createjs.Sound),assets.on("complete",init,this),assets.loadManifest(manifest)}function setupCanvas(){canvas=document.getElementById("canvas"),canvas.setAttribute("width",config.Screen.WIDTH.toString()),canvas.setAttribute("height",(.1*config.Screen.HEIGHT).toString()),canvas.style.backgroundColor="#000000"}function init(){setupCanvas(),setupRenderer(),setupCamera(),currentScene=config.Scene.MENU,changeScene(),addStatsObject(),document.body.appendChild(renderer.domElement),gameLoop(),window.addEventListener("resize",onWindowResize,!1)}function onWindowResize(){camera.aspect=window.innerWidth/window.innerHeight,camera.updateProjectionMatrix(),renderer.setSize(window.innerWidth,window.innerHeight),scene.resize()}function addStatsObject(){stats=new Stats,stats.setMode(0),stats.domElement.style.position="absolute",stats.domElement.style.left="0px",stats.domElement.style.top="0px",document.body.appendChild(stats.domElement)}function gameLoop(){stats.update(),scene.update(),requestAnimationFrame(gameLoop),renderer.render(scene,camera)}function setupRenderer(){renderer=new Renderer({antialias:!0}),renderer.setClearColor(4210752,1),renderer.setPixelRatio(window.devicePixelRatio),renderer.setSize(CScreen.WIDTH,CScreen.HEIGHT),renderer.shadowMap.enabled=!0,renderer.autoClear=!0,console.log("Finished setting up Renderer...")}function setupCamera(){camera=new PerspectiveCamera(35,config.Screen.RATIO,.1,100),console.log("Finished setting up Camera...")}function changeScene(){switch(currentScene){case config.Scene.MENU:menu=new scenes.Menu,scene=menu,console.log("Starting MENU Scene");break;case config.Scene.LEVEL1:level1=new scenes.Level1,scene=level1,console.log("Starting LEVEL1 Scene");break;case config.Scene.LEVEL2:level2=new scenes.Level2,scene=level2,console.log("Starting LEVEL2 Scene");break;case config.Scene.LEVEL3:level3=new scenes.Level3,scene=level3,console.log("Starting LEVEL3 Scene");break;case config.Scene.OVER:over=new scenes.Over,scene=over,console.log("Starting OVER Scene");break;case config.Scene.HELP:help=new scenes.Help,scene=help,console.log("Starting HELP Scene")}}var __extends=this&&this.__extends||function(e,t){function s(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(s.prototype=t.prototype,new s)},objects;!function(e){var t=function(e){function t(t,s,i,o,a){e.call(this,t,s),this._geometry=t,this._material=s,this.position.x=i,this.position.y=o,this.position.z=a,this.receiveShadow=!0,this.castShadow=!0}return __extends(t,e),t}(THREE.Mesh);e.GameObject=t}(objects||(objects={}));var objects;!function(e){var t=function(){function e(){this.enabled=!1,document.addEventListener("keydown",this.onKeyDown.bind(this),!1),document.addEventListener("keyup",this.onKeyUp.bind(this),!1)}return e.prototype.onKeyDown=function(e){switch(e.keyCode){case 38:case 87:this.moveForward=!0;break;case 37:case 65:this.moveLeft=!0;break;case 40:case 83:this.moveBackward=!0;break;case 39:case 68:this.moveRight=!0;break;case 32:this.jump=!0;break;case 81:this.paused=!this.paused}},e.prototype.onKeyUp=function(e){switch(e.keyCode){case 38:case 87:this.moveForward=!1;break;case 37:case 65:this.moveLeft=!1;break;case 40:case 83:this.moveBackward=!1;break;case 39:case 68:this.moveRight=!1;break;case 32:this.jump=!1}},e}();e.KeyboardControls=t}(objects||(objects={}));var objects;!function(e){var t=function(){function e(){this.enabled=!1,this.sensitivity=.1,this.yaw=0,this.pitch=0,document.addEventListener("mousemove",this.OnMouseMove.bind(this),!1)}return e.prototype.OnMouseMove=function(e){this.yaw=-e.movementX*this.sensitivity*1.2,this.pitch=-e.movementY*this.sensitivity*.1},e}();e.MouseControls=t}(objects||(objects={}));var config;!function(e){var t=function(){function e(){}return e.WIDTH=window.innerWidth,e.HEIGHT=window.innerHeight,e.RATIO=window.innerWidth/window.innerHeight,e}();e.Screen=t;var s=function(){function e(){}return e.MENU=0,e.HELP=1,e.OVER=2,e.LEVEL1=3,e.LEVEL2=4,e.LEVEL3=5,e}();e.Scene=s}(config||(config={}));var __extends=this&&this.__extends||function(e,t){function s(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(s.prototype=t.prototype,new s)},scenes;!function(e){var t=function(e){function t(){e.call(this)}return __extends(t,e),t.prototype.start=function(){},t.prototype.update=function(){},t.prototype.resize=function(){},t}(Physijs.Scene);e.Scene=t}(scenes||(scenes={}));var __extends=this&&this.__extends||function(e,t){function s(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(s.prototype=t.prototype,new s)},scenes;!function(e){var t=function(e){function t(){e.call(this),this.berryLocation=new Array,this.berryNum=0,this.basketLocation=new Array,this.basketNum=0,this._initialize(),this.start()}return __extends(t,e),t.prototype._setupCanvas=function(){canvas.setAttribute("width",config.Screen.WIDTH.toString()),canvas.setAttribute("height",(.1*config.Screen.HEIGHT).toString()),canvas.style.backgroundColor="#000000"},t.prototype.playBackgroundSound=function(){this.bgSound=createjs.Sound.play("Background",{volume:.02}),this.bgSound.on("complete",this.playBackgroundSound,this)},t.prototype._initialize=function(){this.blocker=document.getElementById("blocker"),this.instructions=document.getElementById("instructions"),this.blocker.style.display="block",this._setupCanvas(),this.coinCount=10,this.prevTime=0,this.stage=new createjs.Stage(canvas),this.velocity=new Vector3(0,0,0),this.clock=new Clock,this.keyboardControls=new objects.KeyboardControls,this.mouseControls=new objects.MouseControls},t.prototype.setupScoreboard=function(){this.scoreValue=0,this.livesValue=1,this.livesLabel=new createjs.Text("LIVES: "+this.livesValue,"40px Consolas","#ffffff"),this.livesLabel.x=.1*config.Screen.WIDTH,this.livesLabel.y=.15*config.Screen.HEIGHT*.2,this.stage.addChild(this.livesLabel),console.log("Added Lives Label to stage"),this.levelLabel=new createjs.Text("LEVEL 1","40px Consolas","#ffffff"),this.levelLabel.x=.45*config.Screen.WIDTH,this.levelLabel.y=.15*config.Screen.HEIGHT*.2,this.stage.addChild(this.levelLabel),console.log("Added Lives Label to stage"),this.scoreLabel=new createjs.Text("SCORE: "+this.scoreValue,"40px Consolas","#ffffff"),this.scoreLabel.x=.8*config.Screen.WIDTH,this.scoreLabel.y=.15*config.Screen.HEIGHT*.2,this.stage.addChild(this.scoreLabel),console.log("Added Score Label to stage")},t.prototype.addLights=function(){this.spotLight=new SpotLight(16777215),this.spotLight.position.set(20,50,-15),this.spotLight.castShadow=!0,this.spotLight.intensity=2,this.spotLight.lookAt(new Vector3(0,0,0)),this.spotLight.shadowCameraNear=2,this.spotLight.shadowCameraFar=200,this.spotLight.shadowCameraLeft=-5,this.spotLight.shadowCameraRight=5,this.spotLight.shadowCameraTop=5,this.spotLight.shadowCameraBottom=-5,this.spotLight.shadowMapWidth=2048,this.spotLight.shadowMapHeight=2048,this.spotLight.shadowDarkness=.5,this.spotLight.name="Spot Light",this.add(this.spotLight),this.ambientLight=new AmbientLight(4210752),this.add(this.ambientLight),console.log("Added Lights to scene")},t.prototype.addGround=function(){this.groundTexture=(new THREE.TextureLoader).load("../../Assets/images/grass.png"),this.groundTexture.wrapS=THREE.RepeatWrapping,this.groundTexture.wrapT=THREE.RepeatWrapping,this.groundTexture.repeat.set(8,8),this.groundMaterial=new PhongMaterial,this.groundMaterial.map=this.groundTexture,this.groundGeometry=new BoxGeometry(20,1,20),this.groundPhysicsMaterial=Physijs.createMaterial(this.groundMaterial,0,0),this.ground=new Physijs.ConvexMesh(this.groundGeometry,this.groundPhysicsMaterial,0),this.ground.receiveShadow=!0,this.ground.name="Ground",this.add(this.ground),console.log("Added Burnt Ground to scene")},t.prototype.addIslands=function(){this.islandGeometry=new BoxGeometry(6,1,25),this.islandPhysicsMaterial=Physijs.createMaterial(this.groundMaterial,0,0),this.island1=new Physijs.ConvexMesh(this.islandGeometry,this.islandPhysicsMaterial,0),this.island1.position.set(-17,0,0),this.island1.receiveShadow=!0,this.island1.name="Ground",this.add(this.island1),this.island2=new Physijs.ConvexMesh(this.islandGeometry,this.islandPhysicsMaterial,0),this.island2.position.set(17,0,0),this.island2.receiveShadow=!0,this.island2.name="Ground",this.add(this.island2),this.island3=new Physijs.ConvexMesh(this.islandGeometry,this.islandPhysicsMaterial,0),this.island3.position.set(0,0,-17),this.island3.receiveShadow=!0,this.island3.rotateY(1.5708),this.island3.name="Ground",this.add(this.island3),this.island4=new Physijs.ConvexMesh(this.islandGeometry,this.islandPhysicsMaterial,0),this.island4.position.set(0,0,17),this.island4.receiveShadow=!0,this.island4.rotateY(1.5708),this.island4.name="Ground",this.add(this.island4)},t.prototype.addWalls=function(){this.wallTexture=(new THREE.TextureLoader).load("../../Assets/images/wall.png"),this.wallTexture.wrapS=THREE.RepeatWrapping,this.wallTexture.wrapT=THREE.RepeatWrapping,this.wallTexture.repeat.set(8,8),this.wallMaterial=new PhongMaterial,this.wallMaterial.map=this.wallTexture,this.wallGeometry=new BoxGeometry(20,4,.5),this.wallPhysicsMaterial=Physijs.createMaterial(this.wallMaterial,0,0),this.wall1=new Physijs.ConvexMesh(this.wallGeometry,this.wallPhysicsMaterial,0),this.wall1.position.set(14.2,2.5,-4.1),this.wall1.rotateY(1.5708),this.wall1.receiveShadow=!0,this.wall1.name="Wall",this.add(this.wall1),this.wall2=new Physijs.ConvexMesh(this.wallGeometry,this.wallPhysicsMaterial,0),this.wall2.position.set(6,2.5,6.4),this.wall2.rotateY(1.5708),this.wall2.receiveShadow=!0,this.wall2.name="Wall",this.add(this.wall2),this.wall3=new Physijs.ConvexMesh(this.wallGeometry,this.wallPhysicsMaterial,0),this.wall3.position.set(-10,2.5,-6.1),this.wall3.rotateY(1.5708),this.wall3.receiveShadow=!0,this.wall3.name="Wall",this.add(this.wall3),this.wall4=new Physijs.ConvexMesh(this.wallGeometry,this.wallPhysicsMaterial,0),this.wall4.position.set(-7.7,2.5,9.7),this.wall4.receiveShadow=!0,this.wall4.name="Wall",this.add(this.wall4),this.wall5=new Physijs.ConvexMesh(this.wallGeometry,this.wallPhysicsMaterial,0),this.wall5.position.set(-7.6,2.5,-3.85),this.wall5.receiveShadow=!0,this.wall5.name="Wall",this.add(this.wall5),this.wallGeometry=new BoxGeometry(10,4,.5),this.wall6=new Physijs.ConvexMesh(this.wallGeometry,this.wallPhysicsMaterial,0),this.wall6.position.set(-1.9,2.5,-13),this.wall6.rotateY(1.5708),this.wall6.receiveShadow=!0,this.wall6.name="Wall",this.add(this.wall6)},t.prototype.addRocks=function(){this.rockTexture=(new THREE.TextureLoader).load("../../Assets/images/rock.png"),this.rockTexture.wrapS=THREE.RepeatWrapping,this.rockTexture.wrapT=THREE.RepeatWrapping,this.rockMaterial=new PhongMaterial,this.rockMaterial.map=this.rockTexture,this.rockGeometry=new SphereGeometry(1,5,5),this.rockPhysicsMaterial=Physijs.createMaterial(this.rockMaterial,0,0),this.rock1=new Physijs.ConvexMesh(this.rockGeometry,this.rockPhysicsMaterial,1),this.rock1.position.set(-4,10,-5.5),this.rock1.receiveShadow=!0,this.rock1.name="Rock",this.rock2=new Physijs.ConvexMesh(this.rockGeometry,this.rockPhysicsMaterial,1),this.rock2.position.set(-17,10,-8),this.rock2.receiveShadow=!0,this.rock2.name="Rock",this.rock3=new Physijs.ConvexMesh(this.rockGeometry,this.rockPhysicsMaterial,1),this.rock3.position.set(-18,10,2),this.rock3.receiveShadow=!0,this.rock3.name="Rock"},t.prototype.addLogs=function(){this.logTexture=(new THREE.TextureLoader).load("../../Assets/images/fallingbranch.png"),this.logTexture.wrapS=THREE.RepeatWrapping,this.logTexture.wrapT=THREE.RepeatWrapping,this.logMaterial=new PhongMaterial,this.logMaterial.map=this.logTexture,this.logGeometry=new CylinderGeometry(1,1,10),this.logPhysicsMaterial=Physijs.createMaterial(this.logMaterial,0,0),this.log=new Physijs.ConvexMesh(this.logGeometry,this.logPhysicsMaterial,1),this.log.position.set(4,15,10),this.log.rotation.x=1.5708,this.log.receiveShadow=!0,this.log.name="Log"},t.prototype.addPlates=function(){this.plateTexture=(new THREE.TextureLoader).load("../../Assets/images/PressurePlate.jpg"),this.plateTexture.wrapS=THREE.RepeatWrapping,this.plateTexture.wrapT=THREE.RepeatWrapping,this.plateMaterial=new PhongMaterial,this.plateMaterial.map=this.plateTexture,this.plateGeometry=new CubeGeometry(1,.001,1),this.platePhysicsMaterial=Physijs.createMaterial(this.plateMaterial,0,0),this.plate1=new Physijs.ConvexMesh(this.plateGeometry,this.platePhysicsMaterial,0),this.plate1.position.set(1,.5,-5.5),this.plate1.receiveShadow=!0,this.plate1.name="Plate1",this.add(this.plate1),this.plate2=new Physijs.ConvexMesh(this.plateGeometry,this.platePhysicsMaterial,0),this.plate2.position.set(-18.7,.5,-3),this.plate2.receiveShadow=!0,this.plate2.name="Plate2",this.add(this.plate2),this.plate3=new Physijs.ConvexMesh(this.plateGeometry,this.platePhysicsMaterial,0),this.plate3.position.set(4,.5,9),this.plate3.receiveShadow=!0,this.plate3.name="Plate3",this.add(this.plate3)},t.prototype.resetHazards=function(){this.remove(this.rock1),this.remove(this.rock2),this.remove(this.rock3),this.remove(this.log),this.rock1.position.set(-4,10,-5.5),this.rock2.position.set(-17,10,-8),this.rock3.position.set(-18,10,2),this.log.position.set(4,15,10)},t.prototype.addPlayer=function(){this.playerGeometry=new BoxGeometry(2,4,2),this.playerMaterial=Physijs.createMaterial(new LambertMaterial({color:65280}),.4,0),this.player=new Physijs.BoxMesh(this.playerGeometry,this.playerMaterial,1),this.player.position.set(0,20,0),this.player.receiveShadow=!0,this.player.castShadow=!0,this.player.name="Player",this.add(this.player),console.log("Added Player to Scene"),this.player.setAngularFactor(new THREE.Vector3(0,0,0))},t.prototype.addDeathPlane=function(){this.deathPlaneGeometry=new BoxGeometry(100,1,100),this.deathPlaneMaterial=new THREE.MeshLambertMaterial({color:15066623,transparent:!0,opacity:.1}),this.deathPlane=new Physijs.BoxMesh(this.deathPlaneGeometry,this.deathPlaneMaterial,0),this.deathPlane.position.set(0,-20,0),this.deathPlane.name="DeathPlane",this.add(this.deathPlane),console.log("Added DeathPlane to scene")},t.prototype.addSkyBox=function(){this.skyBoxTexture=(new THREE.TextureLoader).load("../../Assets/images/skyBG.png"),this.skyBox=new gameObject(new SphereGeometry(60,60,60),new LambertMaterial({map:this.skyBoxTexture}),2,2,2),this.skyBox.material.side=THREE.DoubleSide,this.skyBox.name="Skybox",this.add(this.skyBox),console.log("Added skyBox to scene")},t.prototype.addBerry=function(){this.berryTexture=(new THREE.TextureLoader).load("../../Assets/images/berry.png"),this.berryTexture.wrapS=THREE.RepeatWrapping,this.berryTexture.wrapT=THREE.RepeatWrapping,this.berryMaterial=new PhongMaterial,this.berryMaterial.map=this.berryTexture,this.berryGeometry=new BoxGeometry(.5,.5,.5),this.berryPhysicsMaterial=Physijs.createMaterial(this.berryMaterial,0,0),this.berry=new Physijs.ConvexMesh(this.berryGeometry,this.berryPhysicsMaterial,0),this.berry.position.set(-8.5,1.5,-5.5),this.berry.receiveShadow=!0,this.berry.name="Berry",this.add(this.berry),console.log("Added Berry to scene")},t.prototype.addBasket=function(){this.basketTexture=(new THREE.TextureLoader).load("../../Assets/images/bask.png"),this.basketTexture.wrapS=THREE.RepeatWrapping,this.basketTexture.wrapT=THREE.RepeatWrapping,this.basketMaterial=new PhongMaterial,this.basketMaterial.map=this.basketTexture,this.basketGeometry=new BoxGeometry(.5,.5,.5),this.basketPhysicsMaterial=Physijs.createMaterial(this.basketMaterial,0,0),this.basket=new Physijs.ConvexMesh(this.basketGeometry,this.basketPhysicsMaterial,0),this.basket.position.set(-16,3,14),this.basket.receiveShadow=!0,this.basket.name="Basket",this.add(this.basket),console.log("Added basket to scene")},t.prototype.addCoinMesh=function(){var e=this;this.coins=new Array;(new THREE.JSONLoader).load("../../Assets/imported/coin.json",function(t){var s=new PhongMaterial({color:15182642});s.emissive=new THREE.Color(15182642);for(var i=Physijs.createMaterial(s,.4,.6),o=0;o<e.coinCount;o++)e.coins[o]=new Physijs.ConvexMesh(t,i),e.coins[o].receiveShadow=!0,e.coins[o].castShadow=!0,e.coins[o].name="Coin",e.setCoinPosition(e.coins[o]),console.log("Added Coin Mesh to Scene, at position: "+e.coins[o].position)})},t.prototype.setCoinPosition=function(e){var t=Math.floor(20*Math.random())-10,s=Math.floor(20*Math.random())-10;e.position.set(t,10,s),console.log(t),console.log(s),this.add(e)},t.prototype.pointerLockChange=function(e){document.pointerLockElement===this.element?(this.keyboardControls.enabled=!0,this.mouseControls.enabled=!0,this.blocker.style.display="none"):(this.livesValue<=0?(this.blocker.style.display="none",document.removeEventListener("pointerlockchange",this.pointerLockChange.bind(this),!1),document.removeEventListener("mozpointerlockchange",this.pointerLockChange.bind(this),!1),document.removeEventListener("webkitpointerlockchange",this.pointerLockChange.bind(this),!1),document.removeEventListener("pointerlockerror",this.pointerLockError.bind(this),!1),document.removeEventListener("mozpointerlockerror",this.pointerLockError.bind(this),!1),document.removeEventListener("webkitpointerlockerror",this.pointerLockError.bind(this),!1)):(this.blocker.style.display="-webkit-box",this.blocker.style.display="-moz-box",this.blocker.style.display="box",this.instructions.style.display=""),this.keyboardControls.enabled=!1,this.mouseControls.enabled=!1,console.log("PointerLock disabled"))},t.prototype.pointerLockError=function(e){this.instructions.style.display="",console.log("PointerLock Error Detected!!")},t.prototype.checkControls=function(){if(this.keyboardControls.enabled){this.velocity=new Vector3;var e=performance.now(),t=(e-this.prevTime)/1e3,s=600,i=new Vector3(0,0,0);this.keyboardControls.moveForward&&(this.velocity.z-=s*t),this.keyboardControls.moveLeft&&(this.velocity.x-=s*t),this.keyboardControls.moveBackward&&(this.velocity.z+=s*t),this.keyboardControls.moveRight&&(this.velocity.x+=s*t),this.keyboardControls.jump&&this.isGrounded&&(this.player.position.y>=1&&this.player.position.y<=3?this.velocity.y+=10*s*t:this.player.position.y>3&&(this.isGrounded=!1,createjs.Sound.play("jump"))),this.player.setDamping(.7,.1),this.player.setAngularVelocity(new Vector3(0,this.mouseControls.yaw,0)),i.addVectors(i,this.velocity),i.applyQuaternion(this.player.quaternion),Math.abs(this.player.getLinearVelocity().x)<20&&Math.abs(this.player.getLinearVelocity().y)<10&&this.player.applyCentralForce(i),this.cameraLook(),this.mouseControls.pitch=0,this.mouseControls.yaw=0,this.prevTime=e}else this.player.setAngularVelocity(new Vector3(0,0,0))},t.prototype._unpauseSimulation=function(){scene.onSimulationResume(),console.log("resume simulation")},t.prototype.start=function(){var e=this;this.setupScoreboard(),this.playBackgroundSound(),this.havePointerLock="pointerLockElement"in document||"mozPointerLockElement"in document||"webkitPointerLockElement"in document,this.berryLocation.push(new THREE.Vector3(-8.5,1.5,-5.5)),this.berryLocation.push(new THREE.Vector3(-2,1.5,16)),this.berryLocation.push(new THREE.Vector3(17,1.5,0)),this.berryLocation.push(new THREE.Vector3(-15,1.5,-2)),this.basketLocation.push(new THREE.Vector3(-16,3,14)),this.basketLocation.push(new THREE.Vector3(15,3,16)),this.basketLocation.push(new THREE.Vector3(-15,3,-16)),this.basketLocation.push(new THREE.Vector3(17,3,-15)),this.havePointerLock&&(this.element=document.body,this.instructions.addEventListener("click",function(){console.log("Requesting PointerLock"),e.element.requestPointerLock=e.element.requestPointerLock||e.element.mozRequestPointerLock||e.element.webkitRequestPointerLock,e.element.requestPointerLock()}),document.addEventListener("pointerlockchange",this.pointerLockChange.bind(this),!1),document.addEventListener("mozpointerlockchange",this.pointerLockChange.bind(this),!1),document.addEventListener("webkitpointerlockchange",this.pointerLockChange.bind(this),!1),document.addEventListener("pointerlockerror",this.pointerLockError.bind(this),!1),document.addEventListener("mozpointerlockerror",this.pointerLockError.bind(this),!1),document.addEventListener("webkitpointerlockerror",this.pointerLockError.bind(this),!1)),this.name="Main",this.fog=new THREE.Fog(16777215,0,750),this.setGravity(new THREE.Vector3(0,-10,0)),this.addLights(),this.addGround(),this.addIslands(),this.addWalls(),this.addRocks(),this.addLogs(),this.addPlates(),this.resetHazards(),this.addPlayer(),this.addDeathPlane(),this.addSkyBox(),this.addBasket(),this.addBerry(),this.player.addEventListener("collision",function(e){"Ground"!==e.name&&"Wall"!==e.name||(this.isGrounded=!0,createjs.Sound.play("land")),"DeathPlane"===e.name&&(createjs.Sound.play("Falling"),this.addDeath()),"Berry"===e.name&&(createjs.Sound.play("Collect"),this.collectablePicked(e),console.log("player ate a berry")),"Basket"===e.name&&(createjs.Sound.play("Collect"),this.collectablePicked(e),console.log("player ate a basket")),"Plate1"===e.name&&this.add(this.rock1),"Plate2"===e.name&&(this.add(this.rock2),this.add(this.rock3)),"Plate3"===e.name&&this.add(this.log),("Rock"===e.name||"Log"===e.name&&e.position.y>2)&&(createjs.Sound.play("Collision"),this.addDeath())}.bind(this)),this.rock1.addEventListener("collision",function(e){"Ground"!==e.name&&"Wall"!==e.name||this.resetHazards()}.bind(this)),this.rock2.addEventListener("collision",function(e){"Ground"!==e.name&&"Wall"!==e.name||this.resetHazards()}.bind(this)),this.rock3.addEventListener("collision",function(e){"Ground"!==e.name&&"Wall"!==e.name||this.resetHazards()}.bind(this)),this.log.addEventListener("collision",function(e){"Ground"!==e.name&&"Wall"!==e.name||this.resetHazards()}.bind(this)),this.player.add(camera),camera.position.set(0,1,0),this.simulate()},t.prototype.collectablePicked=function(e){this.remove(e),"Berry"===e.name&&(this.berryNum=this.berryNum===this.berryLocation.length-1?0:this.berryNum+1,e.position.x=this.berryLocation[this.berryNum].x,e.position.y=this.berryLocation[this.berryNum].y,e.position.z=this.berryLocation[this.berryNum].z,this.scoreValue+=2),"Basket"===e.name&&(this.basketNum=this.basketNum===this.basketLocation.length-1?0:this.basketNum+1,e.position.x=this.basketLocation[this.basketNum].x,e.position.y=this.basketLocation[this.basketNum].y,e.position.z=this.basketLocation[this.basketNum].z,this.scoreValue+=5),this.scoreLabel.text="SCORE: "+this.scoreValue,this.add(e)},t.prototype.addDeath=function(){this.livesValue--,this.livesValue<=0?(document.exitPointerLock(),this.children=[],currentScene=config.Scene.OVER,changeScene()):(this.livesLabel.text="LIVES: "+this.livesValue,this.remove(this.player),this.player.position.set(0,20,0),this.add(this.player))},t.prototype.addLevelChange=function(){this.scoreValue>1&&(this.children=[],currentScene=config.Scene.LEVEL2,changeScene())},t.prototype.cameraLook=function(){var e=THREE.Math.degToRad(90),t=THREE.Math.degToRad(-90),s=camera.rotation.x+this.mouseControls.pitch;camera.rotation.x=THREE.Math.clamp(s,t,e)},t.prototype.update=function(){this.checkControls(),this.stage.update(),this.addLevelChange(),this.keyboardControls.paused||this.simulate()},t.prototype.resize=function(){canvas.style.width="100%",this.livesLabel.x=.1*config.Screen.WIDTH,this.livesLabel.y=.15*config.Screen.HEIGHT*.2,this.scoreLabel.x=.8*config.Screen.WIDTH,this.scoreLabel.y=.15*config.Screen.HEIGHT*.2,this.stage.update()},t}(e.Scene);e.Level1=t}(scenes||(scenes={}));var __extends=this&&this.__extends||function(e,t){function s(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(s.prototype=t.prototype,new s)},scenes;!function(e){var t=function(e){function t(){e.call(this),this.berryLocation=new Array,this.berryNum=0,this.basketLocation=new Array,this.basketNum=0,this._initialize(),this.start()}return __extends(t,e),t.prototype._setupCanvas=function(){canvas.setAttribute("width",config.Screen.WIDTH.toString()),canvas.setAttribute("height",(.1*config.Screen.HEIGHT).toString()),canvas.style.backgroundColor="#000000"},t.prototype.playBackgroundSound=function(){this.bgSound=createjs.Sound.play("Background",{volume:.02}),this.bgSound.on("complete",this.playBackgroundSound,this)},t.prototype._initialize=function(){this.blocker=document.getElementById("blocker"),this.instructions=document.getElementById("instructions"),this.blocker.style.display="block",this._setupCanvas(),this.coinCount=10,this.prevTime=0,this.stage=new createjs.Stage(canvas),this.velocity=new Vector3(0,0,0),this.clock=new Clock,this.keyboardControls=new objects.KeyboardControls,this.mouseControls=new objects.MouseControls},t.prototype.setupScoreboard=function(){this.scoreValue=0,this.livesValue=1,this.livesLabel=new createjs.Text("LIVES: "+this.livesValue,"40px Consolas","#ffffff"),this.livesLabel.x=.1*config.Screen.WIDTH,this.livesLabel.y=.15*config.Screen.HEIGHT*.2,this.stage.addChild(this.livesLabel),console.log("Added Lives Label to stage"),this.levelLabel=new createjs.Text("LEVEL 2","40px Consolas","#ffffff"),this.levelLabel.x=.45*config.Screen.WIDTH,this.levelLabel.y=.15*config.Screen.HEIGHT*.2,this.stage.addChild(this.levelLabel),console.log("Added Lives Label to stage"),this.scoreLabel=new createjs.Text("SCORE: "+this.scoreValue,"40px Consolas","#ffffff"),this.scoreLabel.x=.8*config.Screen.WIDTH,this.scoreLabel.y=.15*config.Screen.HEIGHT*.2,this.stage.addChild(this.scoreLabel),console.log("Added Score Label to stage")},t.prototype.addLights=function(){this.spotLight=new SpotLight(16777215),this.spotLight.position.set(20,50,-15),this.spotLight.castShadow=!0,this.spotLight.intensity=2,this.spotLight.lookAt(new Vector3(0,0,0)),this.spotLight.shadowCameraNear=2,this.spotLight.shadowCameraFar=200,this.spotLight.shadowCameraLeft=-5,this.spotLight.shadowCameraRight=5,this.spotLight.shadowCameraTop=5,this.spotLight.shadowCameraBottom=-5,this.spotLight.shadowMapWidth=2048,this.spotLight.shadowMapHeight=2048,this.spotLight.shadowDarkness=.5,this.spotLight.name="Spot Light",this.add(this.spotLight),this.ambientLight=new AmbientLight(4210752),this.add(this.ambientLight),console.log("Added Lights to scene")},t.prototype.addGround=function(){this.groundTexture=(new THREE.TextureLoader).load("../../Assets/images/grass.png"),this.groundTexture.wrapS=THREE.RepeatWrapping,this.groundTexture.wrapT=THREE.RepeatWrapping,this.groundTexture.repeat.set(8,8),this.groundMaterial=new PhongMaterial,this.groundMaterial.map=this.groundTexture,this.groundGeometry=new BoxGeometry(12,1,10),this.groundPhysicsMaterial=Physijs.createMaterial(this.groundMaterial,0,0),this.ground=new Physijs.ConvexMesh(this.groundGeometry,this.groundPhysicsMaterial,0),this.ground.position.set(-4.5,0,0),this.ground.receiveShadow=!0,this.ground.name="Ground",this.add(this.ground),console.log("Added Burnt Ground to scene"),this.ground23Geometry=new BoxGeometry(6,1,5),this.ground2=new Physijs.ConvexMesh(this.ground23Geometry,this.groundPhysicsMaterial,0),this.ground2.position.set(-13.5,0,-2.5),this.ground2.receiveShadow=!0,this.ground2.name="Ground23",this.add(this.ground2),console.log("Added Ground 2 to scene"),this.ground3=new Physijs.ConvexMesh(this.ground23Geometry,this.groundPhysicsMaterial,0),this.ground3.position.set(-13.5,0,2.5),this.ground3.receiveShadow=!0,this.ground3.name="Ground23",this.add(this.ground3),console.log("Added Ground 3 to scene"),this.ground4Geometry=new BoxGeometry(25,1,10),this.ground4=new Physijs.ConvexMesh(this.ground4Geometry,this.groundPhysicsMaterial,0),this.ground4.position.set(-29,0,0),this.ground4.receiveShadow=!0,this.ground4.name="Ground23",this.add(this.ground4),console.log("Added Ground 4 to scene")},t.prototype.addWalls=function(){this.wallTexture=(new THREE.TextureLoader).load("../../Assets/images/wall.png"),this.wallTexture.wrapS=THREE.RepeatWrapping,this.wallTexture.wrapT=THREE.RepeatWrapping,this.wallTexture.repeat.set(8,8),this.wallMaterial=new PhongMaterial,this.wallMaterial.map=this.wallTexture,this.wallGeometry=new BoxGeometry(10,4,.5),this.wallPhysicsMaterial=Physijs.createMaterial(this.wallMaterial,0,0),this.wall1=new Physijs.ConvexMesh(this.wallGeometry,this.wallPhysicsMaterial,0),this.wall1.position.set(-7.5,2,0),this.wall1.receiveShadow=!0,this.wall1.name="Wall",this.add(this.wall1),this.wall2=new Physijs.ConvexMesh(this.wallGeometry,this.wallPhysicsMaterial,0),this.wall2.position.set(-20.5,2,0),this.wall2.receiveShadow=!0,this.wall2.name="Wall",this.add(this.wall2),this.wall3=new Physijs.ConvexMesh(this.wallGeometry,this.wallPhysicsMaterial,0),this.wall3.position.set(-33,2,0),this.wall3.receiveShadow=!0,this.wall3.name="Wall",this.add(this.wall3),console.log("WHERE IS THE WALL3?"),this.wall4=new Physijs.ConvexMesh(this.wallGeometry,this.wallPhysicsMaterial,0),this.wall4.position.set(-38.2,-2,-2.3),this.wall4.receiveShadow=!0,this.wall4.name="Wall",this.add(this.wall4),console.log("WHERE IS THE WALL?")},t.prototype.addRocks=function(){this.rockTexture=(new THREE.TextureLoader).load("../../Assets/images/rock.png"),this.rockTexture.wrapS=THREE.RepeatWrapping,this.rockTexture.wrapT=THREE.RepeatWrapping,this.rockMaterial=new PhongMaterial,this.rockMaterial.map=this.rockTexture,this.rockGeometry=new SphereGeometry(1,5,5),this.rockPhysicsMaterial=Physijs.createMaterial(this.rockMaterial,0,0),this.rock1=new Physijs.ConvexMesh(this.rockGeometry,this.rockPhysicsMaterial,1),this.rock1.position.set(-7.8,10,2.8),this.rock1.receiveShadow=!0,this.rock1.name="Rock"},t.prototype.addLogs=function(){this.logTexture=(new THREE.TextureLoader).load("../../Assets/images/fallingbranch.png"),this.logTexture.wrapS=THREE.RepeatWrapping,this.logTexture.wrapT=THREE.RepeatWrapping,this.logMaterial=new PhongMaterial,this.logMaterial.map=this.logTexture,this.logGeometry=new CylinderGeometry(1,1,5),this.logPhysicsMaterial=Physijs.createMaterial(this.logMaterial,0,0),this.log=new Physijs.ConvexMesh(this.logGeometry,this.logPhysicsMaterial,1),this.log.rotation.x=1.5708,this.log.rotation.z=1.5708,this.log.position.set(-32,10,-2.7),this.log.receiveShadow=!0,this.log.name="Log"},t.prototype.addPlates=function(){this.plateTexture=(new THREE.TextureLoader).load("../../Assets/images/PressurePlate.jpg"),this.plateTexture.wrapS=THREE.RepeatWrapping,this.plateTexture.wrapT=THREE.RepeatWrapping,this.plateMaterial=new PhongMaterial,this.plateMaterial.map=this.plateTexture,this.plateGeometry=new CubeGeometry(2,.001,2),this.platePhysicsMaterial=Physijs.createMaterial(this.plateMaterial,0,0),this.plate1=new Physijs.ConvexMesh(this.plateGeometry,this.platePhysicsMaterial,0),this.plate1.position.set(-5.8,.5,2.8),this.plate1.receiveShadow=!0,this.plate1.name="Plate1",this.add(this.plate1),this.plate2=new Physijs.ConvexMesh(this.plateGeometry,this.platePhysicsMaterial,0),this.plate2.position.set(-13,.5,-2.6),this.plate2.receiveShadow=!0,this.plate2.name="Plate2",this.add(this.plate2),this.plate3=new Physijs.ConvexMesh(this.plateGeometry,this.platePhysicsMaterial,0),this.plate3.position.set(-21,.5,2.7),this.plate3.receiveShadow=!0,this.plate3.name="Plate3",this.add(this.plate3),this.plate4=new Physijs.ConvexMesh(this.plateGeometry,this.platePhysicsMaterial,0),this.plate4.position.set(-27,.5,-2.7),this.plate4.receiveShadow=!0,this.plate4.name="Plate4",this.add(this.plate4),this.plate5=new Physijs.ConvexMesh(this.plateGeometry,this.platePhysicsMaterial,0),this.plate5.position.set(-32,.5,2.3),this.plate5.receiveShadow=!0,this.plate5.name="Plate5",this.add(this.plate5)},t.prototype.resetHazards=function(){this.remove(this.rock1),this.remove(this.log),this.rock1.position.set(-7.8,10,2.8),this.log.position.set(-27,10,-2.7)},t.prototype.addPlayer=function(){this.playerGeometry=new BoxGeometry(2,4,2),this.playerMaterial=Physijs.createMaterial(new LambertMaterial({color:65280}),.4,0),this.player=new Physijs.BoxMesh(this.playerGeometry,this.playerMaterial,1),this.player.position.set(0,5,0),this.player.receiveShadow=!0,
this.player.castShadow=!0,this.player.name="Player",this.add(this.player),console.log("Added Player to Scene"),this.player.setAngularFactor(new THREE.Vector3(0,0,0))},t.prototype.addDeathPlane=function(){this.deathPlaneGeometry=new BoxGeometry(100,1,100),this.deathPlaneMaterial=new THREE.MeshLambertMaterial({color:15066623,transparent:!0,opacity:.1}),this.deathPlane=new Physijs.BoxMesh(this.deathPlaneGeometry,this.deathPlaneMaterial,0),this.deathPlane.position.set(0,-20,0),this.deathPlane.name="DeathPlane",this.add(this.deathPlane),console.log("Added DeathPlane to scene")},t.prototype.addSkyBox=function(){this.skyBoxTexture=(new THREE.TextureLoader).load("../../Assets/images/skyBG.png"),this.skyBox=new gameObject(new SphereGeometry(60,60,60),new LambertMaterial({map:this.skyBoxTexture}),2,2,2),this.skyBox.material.side=THREE.DoubleSide,this.skyBox.name="Skybox",this.add(this.skyBox),console.log("Added skyBox to scene")},t.prototype.addBerry=function(){this.berryTexture=(new THREE.TextureLoader).load("../../Assets/images/berry.png"),this.berryTexture.wrapS=THREE.RepeatWrapping,this.berryTexture.wrapT=THREE.RepeatWrapping,this.berryMaterial=new PhongMaterial,this.berryMaterial.map=this.berryTexture,this.berryGeometry=new BoxGeometry(.5,.5,.5),this.berryPhysicsMaterial=Physijs.createMaterial(this.berryMaterial,0,0),this.berry=new Physijs.ConvexMesh(this.berryGeometry,this.berryPhysicsMaterial,0),this.berry.position.set(-9.5,1.5,2.8),this.berry.receiveShadow=!0,this.berry.name="Berry",this.add(this.berry),console.log("Added Berry to scene")},t.prototype.addBasket=function(){this.basketTexture=(new THREE.TextureLoader).load("../../Assets/images/bask.png"),this.basketTexture.wrapS=THREE.RepeatWrapping,this.basketTexture.wrapT=THREE.RepeatWrapping,this.basketMaterial=new PhongMaterial,this.basketMaterial.map=this.basketTexture,this.basketGeometry=new BoxGeometry(.5,.5,.5),this.basketPhysicsMaterial=Physijs.createMaterial(this.basketMaterial,0,0),this.basket=new Physijs.ConvexMesh(this.basketGeometry,this.basketPhysicsMaterial,0),this.basket.position.set(-14,3,-2.6),this.basket.receiveShadow=!0,this.basket.name="Basket",this.add(this.basket),console.log("Added basket to scene")},t.prototype.addCoinMesh=function(){var e=this;this.coins=new Array;(new THREE.JSONLoader).load("../../Assets/imported/coin.json",function(t){var s=new PhongMaterial({color:15182642});s.emissive=new THREE.Color(15182642);for(var i=Physijs.createMaterial(s,.4,.6),o=0;o<e.coinCount;o++)e.coins[o]=new Physijs.ConvexMesh(t,i),e.coins[o].receiveShadow=!0,e.coins[o].castShadow=!0,e.coins[o].name="Coin",e.setCoinPosition(e.coins[o]),console.log("Added Coin Mesh to Scene, at position: "+e.coins[o].position)})},t.prototype.setCoinPosition=function(e){var t=Math.floor(20*Math.random())-10,s=Math.floor(20*Math.random())-10;e.position.set(t,10,s),console.log(t),console.log(s),this.add(e)},t.prototype.pointerLockChange=function(e){document.pointerLockElement===this.element?(this.keyboardControls.enabled=!0,this.mouseControls.enabled=!0,this.blocker.style.display="none"):(this.livesValue<=0?(this.blocker.style.display="none",document.removeEventListener("pointerlockchange",this.pointerLockChange.bind(this),!1),document.removeEventListener("mozpointerlockchange",this.pointerLockChange.bind(this),!1),document.removeEventListener("webkitpointerlockchange",this.pointerLockChange.bind(this),!1),document.removeEventListener("pointerlockerror",this.pointerLockError.bind(this),!1),document.removeEventListener("mozpointerlockerror",this.pointerLockError.bind(this),!1),document.removeEventListener("webkitpointerlockerror",this.pointerLockError.bind(this),!1)):(this.blocker.style.display="-webkit-box",this.blocker.style.display="-moz-box",this.blocker.style.display="box",this.instructions.style.display=""),this.keyboardControls.enabled=!1,this.mouseControls.enabled=!1,console.log("PointerLock disabled"))},t.prototype.pointerLockError=function(e){this.instructions.style.display="",console.log("PointerLock Error Detected!!")},t.prototype.checkControls=function(){if(this.keyboardControls.enabled){this.velocity=new Vector3;var e=performance.now(),t=(e-this.prevTime)/1e3,s=600,i=new Vector3(0,0,0);this.keyboardControls.moveForward&&(this.velocity.z-=s*t),this.keyboardControls.moveLeft&&(this.velocity.x-=s*t),this.keyboardControls.moveBackward&&(this.velocity.z+=s*t),this.keyboardControls.moveRight&&(this.velocity.x+=s*t),this.keyboardControls.jump&&this.isGrounded&&(this.player.position.y>=1&&this.player.position.y<=3?this.velocity.y+=10*s*t:this.player.position.y>3&&(this.isGrounded=!1,createjs.Sound.play("jump"))),this.player.setDamping(.7,.1),this.player.setAngularVelocity(new Vector3(0,this.mouseControls.yaw,0)),i.addVectors(i,this.velocity),i.applyQuaternion(this.player.quaternion),Math.abs(this.player.getLinearVelocity().x)<20&&Math.abs(this.player.getLinearVelocity().y)<10&&this.player.applyCentralForce(i),this.cameraLook(),this.mouseControls.pitch=0,this.mouseControls.yaw=0,this.prevTime=e}else this.player.setAngularVelocity(new Vector3(0,0,0))},t.prototype._unpauseSimulation=function(){scene.onSimulationResume(),console.log("resume simulation")},t.prototype.start=function(){var e=this;this.setupScoreboard(),this.playBackgroundSound(),this.havePointerLock="pointerLockElement"in document||"mozPointerLockElement"in document||"webkitPointerLockElement"in document,this.berryLocation.push(new THREE.Vector3(-9.5,1.5,2.8)),this.berryLocation.push(new THREE.Vector3(-27,1.5,0)),this.berryLocation.push(new THREE.Vector3(-34,1.5,-2.6)),this.basketLocation.push(new THREE.Vector3(-14,3,-2.6)),this.basketLocation.push(new THREE.Vector3(-40,3,-1.4)),this.havePointerLock&&(this.element=document.body,this.instructions.addEventListener("click",function(){console.log("Requesting PointerLock"),e.element.requestPointerLock=e.element.requestPointerLock||e.element.mozRequestPointerLock||e.element.webkitRequestPointerLock,e.element.requestPointerLock()}),document.addEventListener("pointerlockchange",this.pointerLockChange.bind(this),!1),document.addEventListener("mozpointerlockchange",this.pointerLockChange.bind(this),!1),document.addEventListener("webkitpointerlockchange",this.pointerLockChange.bind(this),!1),document.addEventListener("pointerlockerror",this.pointerLockError.bind(this),!1),document.addEventListener("mozpointerlockerror",this.pointerLockError.bind(this),!1),document.addEventListener("webkitpointerlockerror",this.pointerLockError.bind(this),!1)),this.name="Main",this.fog=new THREE.Fog(16777215,0,750),this.setGravity(new THREE.Vector3(0,-10,0)),this.addLights(),this.addGround(),this.addWalls(),this.addRocks(),this.addLogs(),this.addPlates(),this.resetHazards(),this.addPlayer(),this.addDeathPlane(),this.addSkyBox(),this.addBasket(),this.addBerry(),this.player.addEventListener("collision",function(e){"Ground"!==e.name&&"Wall"!==e.name||(this.isGrounded=!0,createjs.Sound.play("land")),"Wall"===e.name&&console.log("WALL HIT"),"DeathPlane"===e.name&&(createjs.Sound.play("Falling"),this.addDeath()),"Berry"===e.name&&(createjs.Sound.play("Collect"),this.collectablePicked(e),console.log("player ate a berry")),"Basket"===e.name&&(createjs.Sound.play("Collect"),this.collectablePicked(e),console.log("player ate a basket")),"Plate1"===e.name&&this.add(this.rock1),"Plate2"===e.name&&(this.remove(this.ground2),this.remove(this.plate2)),"Plate3"===e.name&&console.log("Move wall"),"Plate4"===e.name&&this.add(this.log),"Plate5"===e.name&&(console.log("Add wall to block path"),this.wall4.position.set(-38.2,-2.3,2.1)),("Rock"===e.name||"Log"===e.name&&e.position.y>2)&&(createjs.Sound.play("Collision"),this.addDeath())}.bind(this)),this.rock1.addEventListener("collision",function(e){"Ground"!==e.name&&"Wall"!==e.name||this.resetHazards()}.bind(this)),this.log.addEventListener("collision",function(e){"Ground"!==e.name&&"Wall"!==e.name||this.resetHazards()}.bind(this)),this.player.add(camera),camera.position.set(0,1,0),this.simulate()},t.prototype.collectablePicked=function(e){this.remove(e),"Berry"===e.name&&(this.berryNum=this.berryNum===this.berryLocation.length-1?0:this.berryNum+1,e.position.x=this.berryLocation[this.berryNum].x,e.position.y=this.berryLocation[this.berryNum].y,e.position.z=this.berryLocation[this.berryNum].z,this.scoreValue+=2),"Basket"===e.name&&(this.basketNum=this.basketNum===this.basketLocation.length-1?0:this.basketNum+1,e.position.x=this.basketLocation[this.basketNum].x,e.position.y=this.basketLocation[this.basketNum].y,e.position.z=this.basketLocation[this.basketNum].z,this.scoreValue+=5),this.scoreLabel.text="SCORE: "+this.scoreValue,this.add(e)},t.prototype.addDeath=function(){this.livesValue--,this.livesValue<=0?(document.exitPointerLock(),this.children=[],currentScene=config.Scene.OVER,changeScene()):(this.livesLabel.text="LIVES: "+this.livesValue,this.remove(this.player),this.player.position.set(0,20,0),this.wall4.position.set(-38.2,-2,-2.3),this.add(this.player))},t.prototype.addLevelChange=function(){this.scoreValue>1&&(document.exitPointerLock(),this.children=[],currentScene=config.Scene.LEVEL3,changeScene())},t.prototype.cameraLook=function(){var e=THREE.Math.degToRad(90),t=THREE.Math.degToRad(-90),s=camera.rotation.x+this.mouseControls.pitch;camera.rotation.x=THREE.Math.clamp(s,t,e)},t.prototype.update=function(){this.checkControls(),this.stage.update(),this.keyboardControls.paused||this.simulate()},t.prototype.resize=function(){canvas.style.width="100%",this.livesLabel.x=.1*config.Screen.WIDTH,this.livesLabel.y=.15*config.Screen.HEIGHT*.2,this.scoreLabel.x=.8*config.Screen.WIDTH,this.scoreLabel.y=.15*config.Screen.HEIGHT*.2,this.stage.update()},t}(e.Scene);e.Level2=t}(scenes||(scenes={}));var __extends=this&&this.__extends||function(e,t){function s(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(s.prototype=t.prototype,new s)},scenes;!function(e){var t=function(e){function t(){e.call(this),this.berryLocation=new Array,this.berryNum=0,this.basketLocation=new Array,this.basketNum=0,this._initialize(),this.start()}return __extends(t,e),t.prototype._setupCanvas=function(){canvas.setAttribute("width",config.Screen.WIDTH.toString()),canvas.setAttribute("height",(.1*config.Screen.HEIGHT).toString()),canvas.style.backgroundColor="#000000"},t.prototype.playBackgroundSound=function(){this.bgSound=createjs.Sound.play("Background",{volume:.02}),this.bgSound.on("complete",this.playBackgroundSound,this)},t.prototype._initialize=function(){this.blocker=document.getElementById("blocker"),this.instructions=document.getElementById("instructions"),this.blocker.style.display="block",this._setupCanvas(),this.coinCount=10,this.prevTime=0,this.stage=new createjs.Stage(canvas),this.velocity=new Vector3(0,0,0),this.clock=new Clock,this.keyboardControls=new objects.KeyboardControls,this.mouseControls=new objects.MouseControls},t.prototype.setupScoreboard=function(){this.scoreValue=0,this.livesValue=1,this.livesLabel=new createjs.Text("LIVES: "+this.livesValue,"40px Consolas","#ffffff"),this.livesLabel.x=.1*config.Screen.WIDTH,this.livesLabel.y=.15*config.Screen.HEIGHT*.2,this.stage.addChild(this.livesLabel),console.log("Added Lives Label to stage"),this.scoreLabel=new createjs.Text("SCORE: "+this.scoreValue,"40px Consolas","#ffffff"),this.scoreLabel.x=.8*config.Screen.WIDTH,this.scoreLabel.y=.15*config.Screen.HEIGHT*.2,this.stage.addChild(this.scoreLabel),console.log("Added Score Label to stage")},t.prototype.addLights=function(){this.spotLight=new SpotLight(16777215),this.spotLight.position.set(20,50,-15),this.spotLight.castShadow=!0,this.spotLight.intensity=2,this.spotLight.lookAt(new Vector3(0,0,0)),this.spotLight.shadowCameraNear=2,this.spotLight.shadowCameraFar=200,this.spotLight.shadowCameraLeft=-5,this.spotLight.shadowCameraRight=5,this.spotLight.shadowCameraTop=5,this.spotLight.shadowCameraBottom=-5,this.spotLight.shadowMapWidth=2048,this.spotLight.shadowMapHeight=2048,this.spotLight.shadowDarkness=.5,this.spotLight.name="Spot Light",this.add(this.spotLight),this.ambientLight=new AmbientLight(4210752),this.add(this.ambientLight),console.log("Added Lights to scene")},t.prototype.addGround=function(){this.groundTexture=(new THREE.TextureLoader).load("../../Assets/images/grass.jpg"),this.groundTexture.wrapS=THREE.RepeatWrapping,this.groundTexture.wrapT=THREE.RepeatWrapping,this.groundTexture.repeat.set(8,8),this.groundTextureNormal=(new THREE.TextureLoader).load("../../Assets/images/GravelCobbleNormal.png"),this.groundTextureNormal.wrapS=THREE.RepeatWrapping,this.groundTextureNormal.wrapT=THREE.RepeatWrapping,this.groundTextureNormal.repeat.set(8,8),this.groundMaterial=new PhongMaterial,this.groundMaterial.map=this.groundTexture,this.groundMaterial.bumpMap=this.groundTextureNormal,this.groundMaterial.bumpScale=.2,this.groundGeometry=new BoxGeometry(20,1,20),this.groundPhysicsMaterial=Physijs.createMaterial(this.groundMaterial,0,0),this.ground=new Physijs.ConvexMesh(this.groundGeometry,this.groundPhysicsMaterial,0),this.ground.receiveShadow=!0,this.ground.name="Ground",this.add(this.ground),console.log("Added Burnt Ground to scene")},t.prototype.addIslands=function(){this.islandGeometry=new BoxGeometry(6,1,25),this.islandPhysicsMaterial=Physijs.createMaterial(this.groundMaterial,0,0),this.island1=new Physijs.ConvexMesh(this.islandGeometry,this.islandPhysicsMaterial,0),this.island1.position.set(-17,0,0),this.island1.receiveShadow=!0,this.island1.name="Ground",this.add(this.island1),this.island2=new Physijs.ConvexMesh(this.islandGeometry,this.islandPhysicsMaterial,0),this.island2.position.set(17,0,0),this.island2.receiveShadow=!0,this.island2.name="Ground",this.add(this.island2),this.island3=new Physijs.ConvexMesh(this.islandGeometry,this.islandPhysicsMaterial,0),this.island3.position.set(0,0,-17),this.island3.receiveShadow=!0,this.island3.rotateY(1.5708),this.island3.name="Ground",this.add(this.island3),this.island4=new Physijs.ConvexMesh(this.islandGeometry,this.islandPhysicsMaterial,0),this.island4.position.set(0,0,17),this.island4.receiveShadow=!0,this.island4.rotateY(1.5708),this.island4.name="Ground",this.add(this.island4)},t.prototype.addWalls=function(){this.wallTexture=(new THREE.TextureLoader).load("../../Assets/images/wall.jpg"),this.wallTexture.wrapS=THREE.RepeatWrapping,this.wallTexture.wrapT=THREE.RepeatWrapping,this.wallTexture.repeat.set(8,8),this.wallMaterial=new PhongMaterial,this.wallMaterial.map=this.wallTexture,this.wallGeometry=new BoxGeometry(20,4,.5),this.wallPhysicsMaterial=Physijs.createMaterial(this.wallMaterial,0,0),this.wall1=new Physijs.ConvexMesh(this.wallGeometry,this.wallPhysicsMaterial,0),this.wall1.position.set(14.2,2.5,-4.1),this.wall1.rotateY(1.5708),this.wall1.receiveShadow=!0,this.wall1.name="Wall",this.add(this.wall1),this.wall2=new Physijs.ConvexMesh(this.wallGeometry,this.wallPhysicsMaterial,0),this.wall2.position.set(6,2.5,6.4),this.wall2.rotateY(1.5708),this.wall2.receiveShadow=!0,this.wall2.name="Wall",this.add(this.wall2),this.wall3=new Physijs.ConvexMesh(this.wallGeometry,this.wallPhysicsMaterial,0),this.wall3.position.set(-10,2.5,-6.1),this.wall3.rotateY(1.5708),this.wall3.receiveShadow=!0,this.wall3.name="Wall",this.add(this.wall3),this.wall4=new Physijs.ConvexMesh(this.wallGeometry,this.wallPhysicsMaterial,0),this.wall4.position.set(-7.7,2.5,9.7),this.wall4.receiveShadow=!0,this.wall4.name="Wall",this.add(this.wall4),this.wall5=new Physijs.ConvexMesh(this.wallGeometry,this.wallPhysicsMaterial,0),this.wall5.position.set(-7.6,2.5,-3.85),this.wall5.receiveShadow=!0,this.wall5.name="Wall",this.add(this.wall5),this.wallGeometry=new BoxGeometry(10,4,.5),this.wall6=new Physijs.ConvexMesh(this.wallGeometry,this.wallPhysicsMaterial,0),this.wall6.position.set(-1.9,2.5,-13),this.wall6.rotateY(1.5708),this.wall6.receiveShadow=!0,this.wall6.name="Wall",this.add(this.wall6)},t.prototype.addRocks=function(){this.rockTexture=(new THREE.TextureLoader).load("../../Assets/images/rock.jpg"),this.rockTexture.wrapS=THREE.RepeatWrapping,this.rockTexture.wrapT=THREE.RepeatWrapping,this.rockMaterial=new PhongMaterial,this.rockMaterial.map=this.rockTexture,this.rockGeometry=new SphereGeometry(1,5,5),this.rockPhysicsMaterial=Physijs.createMaterial(this.rockMaterial,0,0),this.rock1=new Physijs.ConvexMesh(this.rockGeometry,this.rockPhysicsMaterial,1),this.rock1.position.set(-4,10,-5.5),this.rock1.receiveShadow=!0,this.rock1.name="Rock",this.rock2=new Physijs.ConvexMesh(this.rockGeometry,this.rockPhysicsMaterial,1),this.rock2.position.set(-17,10,-8),this.rock2.receiveShadow=!0,this.rock2.name="Rock",this.rock3=new Physijs.ConvexMesh(this.rockGeometry,this.rockPhysicsMaterial,1),this.rock3.position.set(-18,10,2),this.rock3.receiveShadow=!0,this.rock3.name="Rock"},t.prototype.addLogs=function(){this.logTexture=(new THREE.TextureLoader).load("../../Assets/images/fallingbranch.jpg"),this.logTexture.wrapS=THREE.RepeatWrapping,this.logTexture.wrapT=THREE.RepeatWrapping,this.logMaterial=new PhongMaterial,this.logMaterial.map=this.logTexture,this.logGeometry=new CylinderGeometry(1,1,10),this.logPhysicsMaterial=Physijs.createMaterial(this.logMaterial,0,0),this.log=new Physijs.ConvexMesh(this.logGeometry,this.logPhysicsMaterial,1),this.log.position.set(4,15,10),this.log.rotation.x=1.5708,this.log.receiveShadow=!0,this.log.name="Log"},t.prototype.addPlates=function(){this.plateTexture=(new THREE.TextureLoader).load("../../Assets/images/PressurePlate.jpg"),this.plateTexture.wrapS=THREE.RepeatWrapping,this.plateTexture.wrapT=THREE.RepeatWrapping,this.plateMaterial=new PhongMaterial,this.plateMaterial.map=this.plateTexture,this.plateGeometry=new CubeGeometry(1,.001,1),this.platePhysicsMaterial=Physijs.createMaterial(this.plateMaterial,0,0),this.plate1=new Physijs.ConvexMesh(this.plateGeometry,this.platePhysicsMaterial,0),this.plate1.position.set(1,.5,-5.5),this.plate1.receiveShadow=!0,this.plate1.name="Plate1",this.add(this.plate1),this.plate2=new Physijs.ConvexMesh(this.plateGeometry,this.platePhysicsMaterial,0),this.plate2.position.set(-18.7,.5,-3),this.plate2.receiveShadow=!0,this.plate2.name="Plate2",this.add(this.plate2),this.plate3=new Physijs.ConvexMesh(this.plateGeometry,this.platePhysicsMaterial,0),this.plate3.position.set(4,.5,9),this.plate3.receiveShadow=!0,this.plate3.name="Plate3",this.add(this.plate3)},t.prototype.resetHazards=function(){this.remove(this.rock1),this.remove(this.rock2),this.remove(this.rock3),this.remove(this.log),this.rock1.position.set(-4,10,-5.5),this.rock2.position.set(-17,10,-8),this.rock3.position.set(-18,10,2),this.log.position.set(4,15,10)},t.prototype.addPlayer=function(){this.playerGeometry=new BoxGeometry(2,4,2),this.playerMaterial=Physijs.createMaterial(new LambertMaterial({color:65280}),.4,0),this.player=new Physijs.BoxMesh(this.playerGeometry,this.playerMaterial,1),this.player.position.set(0,20,0),this.player.receiveShadow=!0,this.player.castShadow=!0,this.player.name="Player",this.add(this.player),console.log("Added Player to Scene"),this.player.setAngularFactor(new THREE.Vector3(0,0,0))},t.prototype.addDeathPlane=function(){this.deathPlaneGeometry=new BoxGeometry(100,1,100),this.deathPlaneMaterial=new THREE.MeshLambertMaterial({color:15066623,transparent:!0,opacity:.1}),this.deathPlane=new Physijs.BoxMesh(this.deathPlaneGeometry,this.deathPlaneMaterial,0),this.deathPlane.position.set(0,-20,0),this.deathPlane.name="DeathPlane",this.add(this.deathPlane),console.log("Added DeathPlane to scene")},t.prototype.addSkyBox=function(){this.skyBox=new gameObject(new SphereGeometry(60,60,60),new LambertMaterial({map:ImageUtils.loadTexture("../../Assets/Images/skyBG.jpg")}),2,2,2),this.skyBox.material.side=THREE.DoubleSide,this.skyBox.name="Skybox",this.add(this.skyBox),console.log("Added skyBox to scene")},t.prototype.addBerry=function(){this.berryTexture=(new THREE.TextureLoader).load("../../Assets/images/berry.jpg"),this.berryTexture.wrapS=THREE.RepeatWrapping,this.berryTexture.wrapT=THREE.RepeatWrapping,this.berryMaterial=new PhongMaterial,this.berryMaterial.map=this.berryTexture,this.berryGeometry=new BoxGeometry(.5,.5,.5),this.berryPhysicsMaterial=Physijs.createMaterial(this.berryMaterial,0,0),this.berry=new Physijs.ConvexMesh(this.berryGeometry,this.berryPhysicsMaterial,0),this.berry.position.set(-8.5,1.5,-5.5),this.berry.receiveShadow=!0,this.berry.name="Berry",this.add(this.berry),console.log("Added Berry to scene")},t.prototype.addBasket=function(){this.basketTexture=(new THREE.TextureLoader).load("../../Assets/images/bask.jpg"),this.basketTexture.wrapS=THREE.RepeatWrapping,this.basketTexture.wrapT=THREE.RepeatWrapping,this.basketMaterial=new PhongMaterial,this.basketMaterial.map=this.basketTexture,this.basketGeometry=new BoxGeometry(.5,.5,.5),this.basketPhysicsMaterial=Physijs.createMaterial(this.basketMaterial,0,0),this.basket=new Physijs.ConvexMesh(this.basketGeometry,this.basketPhysicsMaterial,0),this.basket.position.set(-16,3,14),this.basket.receiveShadow=!0,this.basket.name="Basket",this.add(this.basket),console.log("Added basket to scene")},t.prototype.addCoinMesh=function(){var e=this;this.coins=new Array;(new THREE.JSONLoader).load("../../Assets/imported/coin.json",function(t){var s=new PhongMaterial({color:15182642});s.emissive=new THREE.Color(15182642);for(var i=Physijs.createMaterial(s,.4,.6),o=0;o<e.coinCount;o++)e.coins[o]=new Physijs.ConvexMesh(t,i),e.coins[o].receiveShadow=!0,e.coins[o].castShadow=!0,e.coins[o].name="Coin",e.setCoinPosition(e.coins[o]),console.log("Added Coin Mesh to Scene, at position: "+e.coins[o].position)})},t.prototype.setCoinPosition=function(e){var t=Math.floor(20*Math.random())-10,s=Math.floor(20*Math.random())-10;e.position.set(t,10,s),console.log(t),console.log(s),this.add(e)},t.prototype.pointerLockChange=function(e){document.pointerLockElement===this.element?(this.keyboardControls.enabled=!0,this.mouseControls.enabled=!0,this.blocker.style.display="none"):(this.livesValue<=0?(this.blocker.style.display="none",document.removeEventListener("pointerlockchange",this.pointerLockChange.bind(this),!1),document.removeEventListener("mozpointerlockchange",this.pointerLockChange.bind(this),!1),document.removeEventListener("webkitpointerlockchange",this.pointerLockChange.bind(this),!1),document.removeEventListener("pointerlockerror",this.pointerLockError.bind(this),!1),document.removeEventListener("mozpointerlockerror",this.pointerLockError.bind(this),!1),document.removeEventListener("webkitpointerlockerror",this.pointerLockError.bind(this),!1)):(this.blocker.style.display="-webkit-box",this.blocker.style.display="-moz-box",this.blocker.style.display="box",this.instructions.style.display=""),this.keyboardControls.enabled=!1,this.mouseControls.enabled=!1,console.log("PointerLock disabled"))},t.prototype.pointerLockError=function(e){this.instructions.style.display="",console.log("PointerLock Error Detected!!")},t.prototype.checkControls=function(){if(this.keyboardControls.enabled){this.velocity=new Vector3;var e=performance.now(),t=(e-this.prevTime)/1e3,s=600,i=new Vector3(0,0,0);this.keyboardControls.moveForward&&(this.velocity.z-=s*t),this.keyboardControls.moveLeft&&(this.velocity.x-=s*t),this.keyboardControls.moveBackward&&(this.velocity.z+=s*t),this.keyboardControls.moveRight&&(this.velocity.x+=s*t),this.keyboardControls.jump&&this.isGrounded&&(this.player.position.y>=1&&this.player.position.y<=3?this.velocity.y+=10*s*t:this.player.position.y>3&&(this.isGrounded=!1,createjs.Sound.play("jump"))),this.player.setDamping(.7,.1),this.player.setAngularVelocity(new Vector3(0,this.mouseControls.yaw,0)),i.addVectors(i,this.velocity),i.applyQuaternion(this.player.quaternion),Math.abs(this.player.getLinearVelocity().x)<20&&Math.abs(this.player.getLinearVelocity().y)<10&&this.player.applyCentralForce(i),this.cameraLook(),this.mouseControls.pitch=0,this.mouseControls.yaw=0,this.prevTime=e}else this.player.setAngularVelocity(new Vector3(0,0,0))},t.prototype._unpauseSimulation=function(){scene.onSimulationResume(),console.log("resume simulation")},t.prototype.start=function(){var e=this;this.setupScoreboard(),this.playBackgroundSound(),this.havePointerLock="pointerLockElement"in document||"mozPointerLockElement"in document||"webkitPointerLockElement"in document,this.berryLocation.push(new THREE.Vector3(-8.5,1.5,-5.5)),this.berryLocation.push(new THREE.Vector3(-2,1.5,16)),this.berryLocation.push(new THREE.Vector3(17,1.5,0)),this.berryLocation.push(new THREE.Vector3(-15,1.5,-2)),this.basketLocation.push(new THREE.Vector3(-16,3,14)),this.basketLocation.push(new THREE.Vector3(15,3,16)),this.basketLocation.push(new THREE.Vector3(-15,3,-16)),this.basketLocation.push(new THREE.Vector3(17,3,-15)),this.havePointerLock&&(this.element=document.body,this.instructions.addEventListener("click",function(){console.log("Requesting PointerLock"),e.element.requestPointerLock=e.element.requestPointerLock||e.element.mozRequestPointerLock||e.element.webkitRequestPointerLock,e.element.requestPointerLock()}),document.addEventListener("pointerlockchange",this.pointerLockChange.bind(this),!1),document.addEventListener("mozpointerlockchange",this.pointerLockChange.bind(this),!1),document.addEventListener("webkitpointerlockchange",this.pointerLockChange.bind(this),!1),document.addEventListener("pointerlockerror",this.pointerLockError.bind(this),!1),document.addEventListener("mozpointerlockerror",this.pointerLockError.bind(this),!1),document.addEventListener("webkitpointerlockerror",this.pointerLockError.bind(this),!1)),this.name="Main",this.fog=new THREE.Fog(16777215,0,750),this.setGravity(new THREE.Vector3(0,-10,0)),this.addLights(),this.addGround(),this.addIslands(),this.addWalls(),this.addRocks(),this.addLogs(),this.addPlates(),this.resetHazards(),this.addPlayer(),this.addDeathPlane(),this.addSkyBox(),this.addBasket(),this.addBerry(),this.player.addEventListener("collision",function(e){"Ground"!==e.name&&"Wall"!==e.name||(this.isGrounded=!0,createjs.Sound.play("land")),"DeathPlane"===e.name&&(createjs.Sound.play("Falling"),this.addDeath()),"Berry"===e.name&&(createjs.Sound.play("Collect"),this.collectablePicked(e),console.log("player ate a berry")),"Basket"===e.name&&(createjs.Sound.play("Collect"),this.collectablePicked(e),console.log("player ate a basket")),"Plate1"===e.name&&this.add(this.rock1),"Plate2"===e.name&&(this.add(this.rock2),this.add(this.rock3)),"Plate3"===e.name&&this.add(this.log),("Rock"===e.name||"Log"===e.name&&e.position.y>2)&&(createjs.Sound.play("Collision"),this.addDeath())}.bind(this)),this.rock1.addEventListener("collision",function(e){"Ground"!==e.name&&"Wall"!==e.name||this.resetHazards()}.bind(this)),this.rock2.addEventListener("collision",function(e){"Ground"!==e.name&&"Wall"!==e.name||this.resetHazards()}.bind(this)),this.rock3.addEventListener("collision",function(e){"Ground"!==e.name&&"Wall"!==e.name||this.resetHazards()}.bind(this)),this.log.addEventListener("collision",function(e){"Ground"!==e.name&&"Wall"!==e.name||this.resetHazards()}.bind(this)),this.player.add(camera),camera.position.set(0,1,0),this.simulate()},t.prototype.collectablePicked=function(e){this.remove(e),"Berry"===e.name&&(this.berryNum=this.berryNum===this.berryLocation.length-1?0:this.berryNum+1,e.position.x=this.berryLocation[this.berryNum].x,e.position.y=this.berryLocation[this.berryNum].y,e.position.z=this.berryLocation[this.berryNum].z,this.scoreValue+=2),"Basket"===e.name&&(this.basketNum=this.basketNum===this.basketLocation.length-1?0:this.basketNum+1,e.position.x=this.basketLocation[this.basketNum].x,e.position.y=this.basketLocation[this.basketNum].y,e.position.z=this.basketLocation[this.basketNum].z,this.scoreValue+=5),this.scoreLabel.text="SCORE: "+this.scoreValue,this.add(e)},t.prototype.addDeath=function(){this.livesValue--,this.livesValue<=0?(document.exitPointerLock(),this.children=[],currentScene=config.Scene.OVER,changeScene()):(this.livesLabel.text="LIVES: "+this.livesValue,this.remove(this.player),this.player.position.set(0,20,0),this.add(this.player))},t.prototype.cameraLook=function(){var e=THREE.Math.degToRad(90),t=THREE.Math.degToRad(-90),s=camera.rotation.x+this.mouseControls.pitch;camera.rotation.x=THREE.Math.clamp(s,t,e)},t.prototype.update=function(){this.checkControls(),this.stage.update(),this.keyboardControls.paused||this.simulate()},t.prototype.resize=function(){canvas.style.width="100%",this.livesLabel.x=.1*config.Screen.WIDTH,this.livesLabel.y=.15*config.Screen.HEIGHT*.2,this.scoreLabel.x=.8*config.Screen.WIDTH,this.scoreLabel.y=.15*config.Screen.HEIGHT*.2,this.stage.update()},t}(e.Scene);e.Level3=t}(scenes||(scenes={}));var __extends=this&&this.__extends||function(e,t){function s(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(s.prototype=t.prototype,new s)},scenes;!function(e){var t=function(e){function t(){e.call(this),this._initialize(),this.start()}return __extends(t,e),t.prototype._setupCanvas=function(){canvas.style.width="100%",canvas.setAttribute("height",config.Screen.HEIGHT.toString()),canvas.style.backgroundColor="#ffffff"},t.prototype._initialize=function(){this._blocker=document.getElementById("blocker"),this._blocker.style.display="none",this._setupCanvas(),this._stage=new createjs.Stage(canvas),this._stage.enableMouseOver(20)},t.prototype.start=function(){this._bgImage=new createjs.Bitmap(assets.getResult("MenuBackground")),this._bgImage.scaleX=2,this._bgImage.scaleY=2,this._stage.addChild(this._bgImage),this._gameOverLabel=new createjs.Text("GAME OVER","80px Consolas","#000000"),this._gameOverLabel.regX=.5*this._gameOverLabel.getMeasuredWidth(),this._gameOverLabel.regY=.5*this._gameOverLabel.getMeasuredLineHeight(),this._gameOverLabel.x=.5*config.Screen.WIDTH,this._gameOverLabel.y=.5*config.Screen.HEIGHT,this._stage.addChild(this._gameOverLabel),this._restartButton=new createjs.Bitmap(assets.getResult("RestartButton")),this._restartButton.regX=.5*this._restartButton.getBounds().width,this._restartButton.regY=.5*this._restartButton.getBounds().height,this._restartButton.x=.5*config.Screen.WIDTH,this._restartButton.y=.5*config.Screen.HEIGHT+150,this._stage.addChild(this._restartButton),this._restartButton.on("mouseover",function(e){e.target.alpha=.7}),this._restartButton.on("mouseout",function(e){e.target.alpha=1}),this._restartButton.on("click",function(e){currentScene=config.Scene.MENU,changeScene()})},t.prototype.update=function(){this._stage.update()},t.prototype.resize=function(){this._setupCanvas()},t}(e.Scene);e.Over=t}(scenes||(scenes={}));var __extends=this&&this.__extends||function(e,t){function s(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(s.prototype=t.prototype,new s)},scenes;!function(e){var t=function(e){function t(){e.call(this),this._initialize(),this.start()}return __extends(t,e),t.prototype._setupCanvas=function(){canvas.style.width="100%",canvas.setAttribute("height",config.Screen.HEIGHT.toString()),canvas.style.backgroundColor="#ffffff"},t.prototype._initialize=function(){this._blocker=document.getElementById("blocker"),this._blocker.style.display="none",this._setupCanvas(),this._stage=new createjs.Stage(canvas),this._stage.enableMouseOver(20)},t.prototype.start=function(){this._bgImage=new createjs.Bitmap(assets.getResult("MenuBackground")),this._bgImage.scaleX=2,this._bgImage.scaleY=2,this._stage.addChild(this._bgImage),this._gameHelpLabel=new createjs.Text("GAME Help","80px Consolas","#000000"),this._gameHelpLabel.regX=.5*this._gameHelpLabel.getMeasuredWidth(),this._gameHelpLabel.regY=.5*this._gameHelpLabel.getMeasuredLineHeight(),this._gameHelpLabel.x=.5*config.Screen.WIDTH,this._gameHelpLabel.y=.5*config.Screen.HEIGHT,this._stage.addChild(this._gameHelpLabel),this._startButton=new createjs.Bitmap(assets.getResult("StartButton")),this._startButton.regX=.5*this._startButton.getBounds().width,this._startButton.regY=.5*this._startButton.getBounds().height,this._startButton.x=.5*config.Screen.WIDTH,
this._startButton.y=.5*config.Screen.HEIGHT+150,this._stage.addChild(this._startButton),this._startButton.on("mouseover",function(e){e.target.alpha=.7}),this._startButton.on("mouseout",function(e){e.target.alpha=1}),this._startButton.on("click",function(e){currentScene=config.Scene.MENU,changeScene()}),this._backButton=new createjs.Bitmap(assets.getResult("BackButton")),this._backButton.regX=.5*this._backButton.getBounds().width,this._backButton.regY=.5*this._backButton.getBounds().height,this._backButton.x=.5*config.Screen.WIDTH,this._backButton.y=.5*config.Screen.HEIGHT+250,this._stage.addChild(this._backButton),this._backButton.on("mouseover",function(e){e.target.alpha=.7}),this._backButton.on("mouseout",function(e){e.target.alpha=1}),this._backButton.on("click",function(e){currentScene=config.Scene.MENU,changeScene()})},t.prototype.update=function(){this._stage.update()},t.prototype.resize=function(){this._setupCanvas()},t}(e.Scene);e.Help=t}(scenes||(scenes={}));var __extends=this&&this.__extends||function(e,t){function s(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(s.prototype=t.prototype,new s)},scenes;!function(e){var t=function(e){function t(){e.call(this),this._initialize(),this.start()}return __extends(t,e),t.prototype._setupCanvas=function(){canvas.style.width="100%",canvas.setAttribute("height",config.Screen.HEIGHT.toString()),canvas.style.backgroundColor="#ffffff"},t.prototype._initialize=function(){this._blocker=document.getElementById("blocker"),this._blocker.style.display="none",this._setupCanvas(),this._stage=new createjs.Stage(canvas),this._stage.enableMouseOver(20)},t.prototype.start=function(){this._bgImage=new createjs.Bitmap(assets.getResult("MenuBackground")),this._bgImage.scaleX=2,this._bgImage.scaleY=2,this._stage.addChild(this._bgImage),this._logoImage=new createjs.Bitmap(assets.getResult("CompanyLogo")),this._logoImage.x=config.Screen.WIDTH/2-this._logoImage.getBounds().width/2,this._logoImage.y=.07*config.Screen.HEIGHT,this._stage.addChild(this._logoImage),this._gameLabel=new createjs.Text("AMAZE SKY GAME","80px Consolas","#000000"),this._gameLabel.regX=.5*this._gameLabel.getMeasuredWidth(),this._gameLabel.regY=.5*this._gameLabel.getMeasuredLineHeight(),this._gameLabel.x=.5*config.Screen.WIDTH,this._gameLabel.y=.5*config.Screen.HEIGHT,this._stage.addChild(this._gameLabel),this._startButton=new createjs.Bitmap(assets.getResult("StartButton")),this._startButton.regX=.5*this._startButton.getBounds().width,this._startButton.regY=.5*this._startButton.getBounds().height,this._startButton.x=.5*config.Screen.WIDTH,this._startButton.y=.5*config.Screen.HEIGHT+150,this._stage.addChild(this._startButton),this._startButton.on("mouseover",function(e){e.target.alpha=.7}),this._startButton.on("mouseout",function(e){e.target.alpha=1}),this._startButton.on("click",function(e){currentScene=config.Scene.LEVEL2,changeScene()}),this._helpButton=new createjs.Bitmap(assets.getResult("HelpButton")),this._helpButton.regX=.5*this._helpButton.getBounds().width,this._helpButton.regY=.5*this._helpButton.getBounds().height,this._helpButton.x=.5*config.Screen.WIDTH,this._helpButton.y=.5*config.Screen.HEIGHT+250,this._stage.addChild(this._helpButton),this._helpButton.on("mouseover",function(e){e.target.alpha=.7}),this._helpButton.on("mouseout",function(e){e.target.alpha=1}),this._helpButton.on("click",function(e){currentScene=config.Scene.HELP,changeScene()}),this._exitButton=new createjs.Bitmap(assets.getResult("ExitButton")),this._exitButton.regX=.5*this._exitButton.getBounds().width,this._exitButton.regY=.5*this._exitButton.getBounds().height,this._exitButton.x=.5*config.Screen.WIDTH,this._exitButton.y=.5*config.Screen.HEIGHT+350,this._stage.addChild(this._exitButton),this._exitButton.on("mouseover",function(e){e.target.alpha=.7}),this._exitButton.on("mouseout",function(e){e.target.alpha=1}),this._exitButton.on("click",function(e){alert("LEAVE THE GAME")})},t.prototype.update=function(){this._stage.update()},t.prototype.resize=function(){this._setupCanvas()},t}(e.Scene);e.Menu=t}(scenes||(scenes={}));var Scene=Physijs.Scene,Renderer=THREE.WebGLRenderer,PerspectiveCamera=THREE.PerspectiveCamera,BoxGeometry=THREE.BoxGeometry,CubeGeometry=THREE.CubeGeometry,PlaneGeometry=THREE.PlaneGeometry,SphereGeometry=THREE.SphereGeometry,CylinderGeometry=THREE.CylinderGeometry,Geometry=THREE.Geometry,AxisHelper=THREE.AxisHelper,LambertMaterial=THREE.MeshLambertMaterial,MeshBasicMaterial=THREE.MeshBasicMaterial,LineBasicMaterial=THREE.LineBasicMaterial,PhongMaterial=THREE.MeshPhongMaterial,Material=THREE.Material,Texture=THREE.Texture,Line=THREE.Line,Mesh=THREE.Mesh,Object3D=THREE.Object3D,SpotLight=THREE.SpotLight,PointLight=THREE.PointLight,AmbientLight=THREE.AmbientLight,Color=THREE.Color,Vector3=THREE.Vector3,Face3=THREE.Face3,CScreen=config.Screen,Clock=THREE.Clock,ImageUtils=THREE.ImageUtils,gameObject=objects.GameObject;Physijs.scripts.worker="/Scripts/lib/Physijs/physijs_worker.js",Physijs.scripts.ammo="/Scripts/lib/Physijs/examples/js/ammo.js";var myWorker=new Worker(Physijs.scripts.worker);console.log(myWorker);var scene,currentScene,renderer,camera,level1,level2,level3,menu,over,help,stats,canvas,assets,manifest=[{id:"land",src:"../../Assets/audio/Land.wav"},{id:"hit",src:"../../Assets/audio/hit.wav"},{id:"coin",src:"../../Assets/audio/coin.mp3"},{id:"jump",src:"../../Assets/audio/Jump.wav"},{id:"Collision",src:"../../Assets/sounds/collision.mp3"},{id:"Collect",src:"../../Assets/sounds/collecting.mp3"},{id:"Falling",src:"../../Assets/sounds/falling.mp3"},{id:"Background",src:"../../Assets/sounds/background.mp3"},{id:"StartButton",src:"../../Assets/images/StartButton.png"},{id:"RestartButton",src:"../../Assets/images/RestartButton.png"},{id:"HelpButton",src:"../../Assets/images/HelpButton.png"},{id:"BackButton",src:"../../Assets/images/BackButton.png"},{id:"ExitButton",src:"../../Assets/images/ExitButton.png"},{id:"GrassTexture",src:"../../Assets/images/grass.png"},{id:"BranchTexture",src:"../../Assets/images/fallingbranch.png"},{id:"WallTexture",src:"../../Assets/images/wall.png"},{id:"SkyBG",src:"../../Assets/images/skyBG.jpg"},{id:"MenuBackground",src:"../../Assets/images/menuBg.jpg"},{id:"CompanyLogo",src:"../../Assets/images/comapanyLogo.png"}];window.onload=preload;
//# sourceMappingURL=uglify.js.map
